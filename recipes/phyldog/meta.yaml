build:
  number: 1

package:
  name: phyldog
  version: 1.0
source:
  git_rev: master
  git_url: https://github.com/Boussau/PHYLDOG.git
requirements:
  build:
    - gcc
    - boost
    - bpp-phyl
    - cmake=3.11.0
    - openmpi
test:
  # from https://pbil.univ-lyon1.fr/redmine/projects/phyldogtoolt/wiki/Tutorial
  files:
    - ExampleData.tar.gz
    - inputFile.txt
  commands:
    - tar zxf ExampleData.tar.gz
    - cd ExampleData
    - python prepareData.py < ../inputFile.txt
    - mv OptionFiles/listSpecies.txt OptionFiles/listSpecies.txtBACKUP 
    - head -6 OptionFiles/listSpecies.txtBACKUP > OptionFiles/listSpecies.txt
    - mv OptionFiles/listGenes.txt OptionFiles/listGenes.txtBACKUP 
    - head -20 OptionFiles/listGenes.txtBACKUP > OptionFiles/listGenes.txt
    - mpirun -np 2 ${PREFIX}/bin/phyldog param=OptionFiles/GeneralOptions.txt
about:
  home: https://pbil.univ-lyon1.fr/software/phyldog/
  license: CeCILL
  summary: PHYLDOG is a program allowing to simultaneously build gene and species trees when gene families have undergone duplications and losses. Trees and parameters are estimated in the maximum likelihood framework.
